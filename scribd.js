(()=>{const template=document.createElement('template');template.innerHTML=`
    <style>.nfx-widget-container{max-width:800px;margin:2rem auto;padding:25px;background-color:#fff;border-radius:12px;box-shadow:0 6px 15px rgb(229 9 20 / .2);font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;position:relative}.nfx-heading{color:#E50914;font-size:2rem;text-align:center;margin-bottom:25px;display:none}.nfx-loader{text-align:center;margin:20px 0;display:none}.nfx-loader img{width:80px;height:80px}.nfx-timer{text-align:center;font-size:1.2rem;color:#E50914;margin:15px 0;display:none}.nfx-cookie-container{background-color:#141414;border:2px solid #E50914;color:#fff;border-radius:8px;padding:20px;font-family:'Courier New',monospace;line-height:1.6;overflow-x:auto;height:400px;display:none;margin:15px 0;white-space:pre-wrap;user-select:none}.nfx-btn{display:block;width:100%;max-width:350px;margin:15px auto;padding:15px 25px;font-size:1.1rem;font-weight:700;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all 0.3s ease;background:#E50914;box-shadow:0 4px 15px rgb(229 9 20 / .3);position:relative;overflow:hidden}.nfx-btn:hover{background:#B20710;transform:translateY(-2px);box-shadow:0 6px 20px rgb(229 9 20 / .4)}.nfx-btn::after{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgb(255 255 255 / .2),transparent);transition:0.5s}.nfx-btn:hover::after{left:100%}.nfx-update-msg{text-align:center;margin:15px 0;color:#E50914;display:none}.nfx-error{display:none;color:#E50914;text-align:center;margin:15px 0;font-weight:700}.nfx-success-alert{display:none;position:fixed;bottom:20px;right:20px;background:#4CAF50;color:#fff;padding:15px 25px;border-radius:30px;box-shadow:0 4px 15px rgb(0 0 0 / .2);animation:nfxSlideIn 0.3s ease-out;z-index:1000}@keyframes nfxSlideIn{from{transform:translateX(100%)}to{transform:translateX(0)}}@media (max-width:768px){.nfx-widget-container{margin:15px;padding:15px}.nfx-cookie-container{height:300px;font-size:.85rem}.nfx-success-alert{bottom:10px;right:10px;font-size:.9rem}}</style><div class=nfx-widget-container><h2 class=nfx-heading>Server One</h2><div class=nfx-loader><img alt=Loading... src=https://ik.imagekit.io/mediawizards/Loading.gif></div><div class=nfx-timer><p>Cookies available in <span class=nfx-countdown>60</span> seconds...</p></div><pre class=nfx-cookie-container></pre><div class=nfx-update-msg></div><button class=nfx-btn>Get Cookie</button><div class=nfx-error>Server connection failed. Please try again.</div><div class=nfx-success-alert>You have successfully copied Cookie</div></div>`;class NetflixCookieWidget extends HTMLElement{constructor(){super();this.attachShadow({mode:'open'});this.shadowRoot.appendChild(template.content.cloneNode(!0));this.config={targetUrl:"https://piximfix.com/cookies/get-scribd-premium-cookies-updats-hourly/",proxyList:["https://api.codetabs.com/v1/proxy/?quest=","https://corsproxy.io/?","https://thingproxy.freeboard.io/fetch/","https://api.allorigins.win/raw?url=","https://yuki-proxy.netlify.app/"],links:["https://cartrigepromised.com/x6k4hke8?key=2072a5a64db977fc6d700040b5fb42bf","https://cartrigepromised.com/g9mj013eif?key=62fb2ef84707963234ab747dd6ee041c","https://cartrigepromised.com/pfbc4v6gb?key=21ee56e8e18bf973e08e3d253147e21b","https://cartrigepromised.com/dkvxdr5qtj?key=e53a9497d2285856f94848eb29eaec0b","https://cartrigepromised.com/gii9ia68e?key=aec9f52868065a0dba9b446b6bfc7d5e"],maxRetries:5,countdownDuration:60};this.state={proxyIndex:0,retries:0,clicks:0,isCopying:!1,dataLoaded:!1};this.elements={heading:this.shadowRoot.querySelector('.nfx-heading'),loader:this.shadowRoot.querySelector('.nfx-loader'),timer:this.shadowRoot.querySelector('.nfx-timer'),countdown:this.shadowRoot.querySelector('.nfx-countdown'),cookies:this.shadowRoot.querySelector('.nfx-cookie-container'),btn:this.shadowRoot.querySelector('.nfx-btn'),updateMsg:this.shadowRoot.querySelector('.nfx-update-msg'),error:this.shadowRoot.querySelector('.nfx-error'),successAlert:this.shadowRoot.querySelector('.nfx-success-alert')}}
connectedCallback(){this.initialize()}
initialize(){this.bindEvents()}
bindEvents(){this.elements.btn.addEventListener('click',e=>{e.stopImmediatePropagation();if(!this.state.dataLoaded){this.handleRefresh()}else{this.handleCopy()}})}
async handleCopy(){if(this.state.isCopying)return;this.state.isCopying=!0;try{this.state.clicks++;if(this.state.clicks<6){const linkIndex=Math.min(this.state.clicks-1,this.config.links.length-1);if(this.config.links[linkIndex]){const newWindow=window.open(this.config.links[linkIndex],"_blank");if(!newWindow||newWindow.closed||typeof newWindow.closed==='undefined'){throw new Error('Popup blocked! Please allow popups for this site')}}
this.elements.btn.textContent=`${6 - this.state.clicks} clicks left to copy`;return}
const textToCopy=this.elements.cookies.textContent;if(!textToCopy.trim()){throw new Error('No content available to copy')}
try{await navigator.clipboard.writeText(textToCopy);this.showSuccessAlert()}catch(err){this.fallbackCopy(textToCopy)}
this.elements.btn.textContent="Copied!";setTimeout(()=>{this.elements.btn.textContent="Copy Again";this.state.clicks=0},2000)}catch(err){this.showErrorAlert(err.message||'Failed to copy!');this.resetCopyButton()}finally{this.state.isCopying=!1}}
resetCopyButton(){this.state.clicks=0;this.elements.btn.textContent="Copy Code"}
fallbackCopy(text){const tempTextarea=document.createElement("textarea");tempTextarea.value=text;tempTextarea.style.position="fixed";tempTextarea.style.opacity="0";document.body.appendChild(tempTextarea);tempTextarea.select();try{const successful=document.execCommand("copy");if(!successful)throw new Error('Fallback copy failed');this.showSuccessAlert()}catch(err){throw new Error('Failed to copy text. Please copy manually.')}finally{document.body.removeChild(tempTextarea)}}
showSuccessAlert(){this.elements.successAlert.style.display='block';setTimeout(()=>{this.elements.successAlert.style.display='none'},3000)}
showErrorAlert(message){this.elements.error.textContent=message;this.elements.error.style.display='block';setTimeout(()=>{this.elements.error.style.display='none'},3000)}
async fetchData(){this.resetUI();this.showLoader();try{const response=await this.tryProxies();const html=await response.text();const content=this.extractContent(html);const cleaned=this.cleanData(content);this.startTimer(cleaned)}catch(error){this.showError(error)}}
async tryProxies(){while(this.state.retries<this.config.maxRetries){try{const proxyUrl=this.config.proxyList[this.state.proxyIndex]+encodeURIComponent(this.config.targetUrl);const response=await fetch(proxyUrl,{headers:{'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36','Accept':'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8','Accept-Language':'en-US,en;q=0.5'}});if(!response.ok)throw new Error(`HTTP error ${response.status}`);return response}catch(error){console.warn(`Proxy ${this.state.proxyIndex + 1} failed: ${error.message}`);this.state.retries++;this.state.proxyIndex=(this.state.proxyIndex+1)%this.config.proxyList.length;await new Promise(resolve=>setTimeout(resolve,500))}}
throw new Error('All proxy servers failed')}
extractContent(html){const regex=/var\s+textHostContent\s*=\s*"([\s\S]*?)";/;const match=html.match(regex);if(!match)throw new Error('No cookie data found');return match[1]}
cleanData(content){try{const unescaped=content.replace(/\\"/g,'"').replace(/\\\\/g,'\\').replace(/\\n/g,'\n').replace(/\\r/g,'\r').replace(/\\\//g,'/').replace(/\\t/g,'\t');const parsed=JSON.parse(unescaped);return JSON.stringify(parsed,null,4)}catch(error){console.error('Data parsing failed:',error);return"⚠️ Error: Invalid cookie format\n\nRaw data:\n"+content}}
startTimer(content){let timeLeft=this.config.countdownDuration;this.elements.timer.style.display='block';this.elements.countdown.textContent=timeLeft;const timer=setInterval(()=>{timeLeft--;this.elements.countdown.textContent=timeLeft;if(timeLeft<=0){clearInterval(timer);this.showContent(content)}},1000)}
showContent(content){this.elements.cookies.textContent=content;this.state.dataLoaded=!0;this.elements.heading.style.display='block';this.elements.cookies.style.display='block';this.elements.btn.textContent="Copy Code";this.elements.loader.style.display='none';this.elements.timer.style.display='none';this.elements.updateMsg.textContent=`Last Updated: ${new Date().toLocaleString()}`;this.elements.updateMsg.style.display='block'}
showError(error){console.error('Fetch error:',error);this.elements.loader.style.display='none';this.elements.error.style.display='block';this.elements.btn.textContent="Try Again";this.state.dataLoaded=!1;this.elements.cookies.textContent=`Error: ${error.message}`;this.elements.cookies.style.display='block'}
resetUI(){this.elements.error.style.display='none';this.elements.cookies.style.display='none';this.elements.updateMsg.style.display='none';this.elements.heading.style.display='none';this.state.clicks=0;this.elements.successAlert.style.display='none'}
showLoader(){this.elements.loader.style.display='block';this.elements.timer.style.display='none';this.elements.btn.textContent="Fetching..."}
handleRefresh(){this.state.retries=0;this.state.proxyIndex=0;this.state.dataLoaded=!1;this.state.clicks=0;this.elements.error.style.display='none';this.fetchData()}}
customElements.define('netflix-cookie-widget',NetflixCookieWidget)})();
